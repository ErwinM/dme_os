1000 : 0019     |     ldi r1, 0x3
1002 : 0112     |     ldi r2, 0x22
1004 : d088     |     wpte r2, r1
1006 : 081a     |     ldi r2, 0x103
1008 : 011b     |     ldi r3, 0x23
100a : d0d0     |     wpte r3, r2
100c : 0103     |     ldi r3, 32
100e : d0c8     |     wpte r3, r1
1010 : 010b     |     ldi r3, 33
1012 : 0009     |     ldi r1, 1
1014 : d0d0     |     wpte r3, r2
1016 : 081a     |     ld16 r2, 0x703
1018 : bc0d     |     
101a : 01f9     |     ldi r1, 0x3f
101c : d050     |     wpte r1, r2
101e : 0103     |     ldi r3, 32
1020 : d4c0     |     wptb r3
1022 : cc01     |     lcr r1
1024 : a889     |     ori r1, r1, 4
1026 : ce40     |     wcr r1
1028 : 0f51     |     la16 r1, _alltraps
102a : bc2c     |     
102c : d801     |     wivec r1
102e : 0801     |     la16 r1, 0xff00
1030 : bdfc     |     
1032 : 9446     |     mov sp, r1
1034 : 02d2     |     la16 r2, _kmain
1036 : bc31     |     
1038 : a279     |     addi r1, pc, 2
103a : c202     |     br.r r2
103c : fe00     |     hlt
     :          | _printint:
103e : be01     |     push	r1
1040 : be05     |     push	bp
1042 : 9585     |     mov	bp, sp
1044 : 00e4     |     ldi	r4, 28
1046 : 97a6     |     sub	sp, sp, r4
1048 : 8822     |     ldw	r3,8(bp)
104a : 9cc1     |     skip.ne	r3,r0
104c : 2026     |     br	L3_console
104e : 8812     |     ldw	r3,4(bp)
1050 : 9cc2     |     skip.lt r3, r0
1052 : 200a     |     br L6_console
1054 : 000c     |     ld16	r4, 1
1056 : 8dab     |     stw	-22(bp),r4
1058 : 0304     |     la16	r4,L7_console
105a : bc23     |     
105c : c204     |     br.r r4
     :          | L6_console:
105e : 91a8     |     stw	-22(bp),r0
     :          | L7_console:
1060 : 89ab     |     ldw	r4,-22(bp)
1062 : 8c23     |     stw	8(bp),r4
1064 : 9d01     |     skip.ne	r4,r0
1066 : 200c     |     br	L3_console
1068 : 8813     |     ldw	r4,4(bp)
106a : 9624     |     sub	r4,r0,r4
106c : 8df3     |     stw	-4(bp),r4
106e : 03c4     |     la16	r4,L4_console
1070 : bc23     |     
1072 : c204     |     br.r r4
     :          | L3_console:
1074 : 8813     |     ldw	r4,4(bp)
1076 : 8df3     |     stw	-4(bp),r4
     :          | L4_console:
1078 : 91f8     |     stw	-2(bp),r0
     :          | L8_console:
107a : 89fb     |     ldw	r4,-2(bp)
107c : a223     |     addi	r3,r4,1
107e : 8dfa     |     stw	-2(bp),r3
1080 : 1f63     |     ldi	r3, -20
1082 : 94eb     |     add	r3, r3, bp
1084 : 951c     |     add	r4,r4,r3
1086 : 8d93     |     stw	-28(bp),r4
1088 : 89f2     |     ldw	r3,-4(bp)
108a : 8da2     |     stw	-24(bp),r3
108c : 8819     |     ldw	r2,6(bp)
108e : 8d99     |     stw	-26(bp),r2
1090 : be05     |     push bp
1092 : be03     |     push r3
1094 : be02     |     push r2
1096 : a27d     |     addi bp, pc, 2
1098 : 2826     |     br _mod
109a : c005     |     pop bp
109c : 0914     |     la16	r4,L2_console
109e : bc33     |     
10a0 : 9464     |     add	r4,r1,r4
10a2 : b224     |     ldb	r4,r0(r4)
10a4 : 8992     |     ldw	r3,-28(bp)
10a6 : b61c     |     stb	r0(r3),r4
     :          | L9_console:
10a8 : 89f3     |     ldw	r4,-4(bp)
10aa : 881a     |     ldw	r3,6(bp)
10ac : be05     |     push bp
10ae : be04     |     push r4
10b0 : be03     |     push r3
10b2 : a27d     |     addi bp, pc, 2
10b4 : 27e4     |     br _div
10b6 : c005     |     pop bp
10b8 : 8df0     |     stw	-4(bp),r1
10ba : 9c40     |     skip.eq r1,r0
10bc : 3fbc     |     br L8_console
10be : 8823     |     ldw	r4,8(bp)
10c0 : 9d01     |     skip.ne	r4,r0
10c2 : 202e     |     br	L1_console4_console
10c4 : 89fb     |     ldw	r4,-2(bp)
10c6 : a223     |     addi	r3,r4,1
10c8 : 8dfa     |     stw	-2(bp),r3
10ca : 1f63     |     ldi	r3, -20
10cc : 94eb     |     add	r3, r3, bp
10ce : 951c     |     add	r4,r4,r3
10d0 : 016b     |     ld16	r3, 45
10d2 : b623     |     stb	r0(r4),r3
10d4 : 0794     |     la16	r4,L1_console4_console
10d6 : bc23     |     
10d8 : c204     |     br.r r4
     :          | L1_console3_console:
10da : 89fb     |     ldw	r4,-2(bp)
10dc : 1f63     |     ldi	r3, -20
10de : 94eb     |     add	r3, r3, bp
10e0 : 951c     |     add	r4,r4,r3
10e2 : b224     |     ldb	r4,r0(r4)
10e4 : be04     |     push	r4
10e6 : 0372     |     la16	r2,_putc
10e8 : bc25     |     
10ea : a279     |     addi	r1,pc,2
10ec : c202     |     br.r	r2
10ee : 0012     |     ldi	r2,2
10f0 : 9596     |     add	sp,sp,r2
     :          | L1_console4_console:
10f2 : 89fb     |     ldw	r4,-2(bp)
10f4 : a424     |     subi	r4,r4,1
10f6 : 8dfb     |     stw	-2(bp),r4
10f8 : 9d02     |     skip.lt r4, r0
10fa : 3fde     |     br L1_console3_console
     :          | L1_console:
10fc : 9546     |     mov	sp, bp
10fe : c005     |     pop	bp
1100 : c007     |     pop	pc
     :          | _kprintf:
1102 : be01     |     push	r1
1104 : be05     |     push	bp
1106 : 9585     |     mov	bp, sp
1108 : 0044     |     ldi	r4, 8
110a : 97a6     |     sub	sp, sp, r4
110c : 0034     |     ldi	r4, 6
110e : 952c     |     add	r4, r4, bp
1110 : 8de3     |     stw	-8(bp),r4
1112 : 91e8     |     stw	-6(bp),r0
1114 : 02b4     |     la16	r4,L2_console1
1116 : bc27     |     
1118 : c204     |     br.r r4
     :          | L1_console8:
111a : 89fb     |     ldw	r4,-2(bp)
111c : 012b     |     ld16	r3, 37
111e : 9d19     |     skip.ne	r4,r3
1120 : 2016     |     br	L2_console2
1122 : 89fb     |     ldw	r4,-2(bp)
1124 : be04     |     push	r4
1126 : 0372     |     la16	r2,_putc
1128 : bc25     |     
112a : a279     |     addi	r1,pc,2
112c : c202     |     br.r	r2
112e : 0012     |     ldi	r2,2
1130 : 9596     |     add	sp,sp,r2
1132 : 0284     |     la16	r4,L1_console9
1134 : bc27     |     
1136 : c204     |     br.r r4
     :          | L2_console2:
1138 : 89eb     |     ldw	r4,-6(bp)
113a : a224     |     addi	r4,r4,1
113c : 8deb     |     stw	-6(bp),r4
113e : 8812     |     ldw	r3,4(bp)
1140 : 951c     |     add	r4,r4,r3
1142 : b224     |     ldb	r4,r0(r4)
1144 : 07fb     |     ld16	r3, 255
1146 : 991c     |     and	r4,r4,r3
1148 : 8dfb     |     stw	-2(bp),r4
114a : 89fb     |     ldw	r4,-2(bp)
114c : 9d00     |     skip.eq r4,r0
114e : 2006     |     br L2_console4
1150 : 0344     |     la16	r4,L2_console0
1152 : bc27     |     
1154 : c204     |     br.r r4
     :          | L2_console4:
1156 : 89fb     |     ldw	r4,-2(bp)
1158 : 0343     |     ld16	r3, 104
115a : 9d19     |     skip.ne	r4,r3
115c : 205e     |     br	L2_console9
115e : 9d1b     |     skip.lte	r4,r3
1160 : 201a     |     br	L4_console0
     :          | L3_console9:
1162 : 89fb     |     ldw	r4,-2(bp)
1164 : 012b     |     ld16	r3, 37
1166 : 9d19     |     skip.ne	r4,r3
1168 : 20b0     |     br	L3_console8
116a : 9d1d     |     skip.gte	r4,r3
116c : 20c2     |     br	L2_console6
     :          | L4_console1:
116e : 89fb     |     ldw	r4,-2(bp)
1170 : 0323     |     ld16	r3, 100
1172 : 9d19     |     skip.ne	r4,r3
1174 : 2026     |     br	L2_console8
1176 : 0184     |     la16	r4,L2_console6
1178 : bc27     |     
117a : c204     |     br.r r4
     :          | L4_console0:
117c : 89fb     |     ldw	r4,-2(bp)
117e : 0383     |     ld16	r3, 112
1180 : 9d19     |     skip.ne	r4,r3
1182 : 2038     |     br	L2_console9
1184 : 039a     |     ld16	r2, 115
1186 : 9d11     |     skip.ne	r4,r2
1188 : 2050     |     br	L3_console0
118a : 9d1d     |     skip.gte	r4,r3
118c : 20a2     |     br	L2_console6
     :          | L4_console2:
118e : 89fb     |     ldw	r4,-2(bp)
1190 : 03c3     |     ld16	r3, 120
1192 : 9d19     |     skip.ne	r4,r3
1194 : 2026     |     br	L2_console9
1196 : 0184     |     la16	r4,L2_console6
1198 : bc27     |     
119a : c204     |     br.r r4
     :          | L2_console8:
119c : 000c     |     ld16	r4, 1
119e : be04     |     push	r4
11a0 : 0054     |     ld16	r4, 10
11a2 : be04     |     push	r4
11a4 : 89e3     |     ldw	r4,-8(bp)
11a6 : a263     |     addi	r3,r4,2
11a8 : 8de2     |     stw	-8(bp),r3
11aa : b024     |     ldw	r4,r0(r4)
11ac : be04     |     push	r4
11ae : 01f2     |     la16	r2,_printint ; jaddr
11b0 : bc21     |     
11b2 : a279     |     addi	r1,pc,2
11b4 : c202     |     br.r	r2
11b6 : 0284     |     la16	r4,L2_console7
11b8 : bc27     |     
11ba : c204     |     br.r r4
     :          | L2_console9:
11bc : be00     |     push	r0
11be : 0084     |     ld16	r4, 16
11c0 : be04     |     push	r4
11c2 : 89e3     |     ldw	r4,-8(bp)
11c4 : a263     |     addi	r3,r4,2
11c6 : 8de2     |     stw	-8(bp),r3
11c8 : b024     |     ldw	r4,r0(r4)
11ca : be04     |     push	r4
11cc : 01f2     |     la16	r2,_printint ; jaddr
11ce : bc21     |     
11d0 : a279     |     addi	r1,pc,2
11d2 : c202     |     br.r	r2
11d4 : 0284     |     la16	r4,L2_console7
11d6 : bc27     |     
11d8 : c204     |     br.r r4
     :          | L3_console0:
11da : 89e3     |     ldw	r4,-8(bp)
11dc : a263     |     addi	r3,r4,2
11de : 8de2     |     stw	-8(bp),r3
11e0 : b024     |     ldw	r4,r0(r4)
11e2 : 8df3     |     stw	-4(bp),r4
11e4 : 9d00     |     skip.eq r4,r0
11e6 : 2024     |     br L3_console7
11e8 : 099c     |     la16	r4,L3_console3
11ea : bc33     |     
11ec : 8df3     |     stw	-4(bp),r4
11ee : 0064     |     la16	r4,L3_console7
11f0 : bc27     |     
11f2 : c204     |     br.r r4
     :          | L3_console4:
11f4 : 89f3     |     ldw	r4,-4(bp)
11f6 : b224     |     ldb	r4,r0(r4)
11f8 : be04     |     push	r4
11fa : 0372     |     la16	r2,_putc
11fc : bc25     |     
11fe : a279     |     addi	r1,pc,2
1200 : c202     |     br.r	r2
1202 : 0012     |     ldi	r2,2
1204 : 9596     |     add	sp,sp,r2
     :          | L3_console5:
1206 : 89f3     |     ldw	r4,-4(bp)
1208 : a224     |     addi	r4,r4,1
120a : 8df3     |     stw	-4(bp),r4
     :          | L3_console7:
120c : 89f3     |     ldw	r4,-4(bp)
120e : b224     |     ldb	r4,r0(r4)
1210 : 9d00     |     skip.eq r4,r0
1212 : 3fe0     |     br L3_console4
1214 : 0284     |     la16	r4,L2_console7
1216 : bc27     |     
1218 : c204     |     br.r r4
     :          | L3_console8:
121a : 012c     |     ld16	r4, 37
121c : be04     |     push	r4
121e : 0372     |     la16	r2,_putc
1220 : bc25     |     
1222 : a279     |     addi	r1,pc,2
1224 : c202     |     br.r	r2
1226 : 0012     |     ldi	r2,2
1228 : 9596     |     add	sp,sp,r2
122a : 0284     |     la16	r4,L2_console7
122c : bc27     |     
122e : c204     |     br.r r4
     :          | L2_console6:
1230 : 012c     |     ld16	r4, 37
1232 : be04     |     push	r4
1234 : 0372     |     la16	r2,_putc
1236 : bc25     |     
1238 : a279     |     addi	r1,pc,2
123a : c202     |     br.r	r2
123c : 0012     |     ldi	r2,2
123e : 9596     |     add	sp,sp,r2
1240 : 89fb     |     ldw	r4,-2(bp)
1242 : be04     |     push	r4
1244 : 0372     |     la16	r2,_putc
1246 : bc25     |     
1248 : a279     |     addi	r1,pc,2
124a : c202     |     br.r	r2
124c : 0012     |     ldi	r2,2
124e : 9596     |     add	sp,sp,r2
     :          | L2_console7:
1250 : 89eb     |     ldw	r4,-6(bp)
1252 : a224     |     addi	r4,r4,1
1254 : 8deb     |     stw	-6(bp),r4
     :          | L2_console1:
1256 : 89eb     |     ldw	r4,-6(bp)
1258 : 8812     |     ldw	r3,4(bp)
125a : 951c     |     add	r4,r4,r3
125c : b224     |     ldb	r4,r0(r4)
125e : 07fb     |     ld16	r3, 255
1260 : 991c     |     and	r4,r4,r3
1262 : 8dfb     |     stw	-2(bp),r4
1264 : 9d00     |     skip.eq r4,r0
1266 : 3eb2     |     br L1_console8
     :          | L2_console0:
1268 : 9546     |     mov	sp, bp
126a : c005     |     pop	bp
126c : c007     |     pop	pc
     :          | _putc:
126e : be01     |     push r1
1270 : be05     |     push bp
1272 : 9585     |     mov bp, sp
1274 : 0c84     |     la16 r4, 0xff90
1276 : bdff     |     
     :          | check_tx_free_uart:
1278 : 0029     |     ldi r1, 5
127a : 9461     |     add r1, r1, r4
127c : b009     |     ldw r1, r0(r1)
127e : 0302     |     ldi r2, 0x60
1280 : 9851     |     and r1, r1, r2
1282 : 9c88     |     skip.eq r2, r1
1284 : 3ff2     |     br check_tx_free_uart
1286 : a2a9     |     addi r1, bp, 4
1288 : b00b     |     ldw r3, r0(r1)
128a : b623     |     stb r0(r4), r3
128c : c005     |     pop	bp
128e : c007     |     pop	pc
     :          | _inituart:
1290 : be01     |     push r1
1292 : be05     |     push bp
1294 : 0c81     |     la16 r1, 0xff90
1296 : bdfc     |     
1298 : 9445     |     mov r5, r1
129a : 9401     |     mov r1, r0
129c : 8c04     |     stw 1(bp), r1   ; port + 1 0x00 - disable all interrupts
129e : 0401     |     ldi r1, 0x80
12a0 : 8c0c     |     stw 3(bp), r1   ; port + 3 0x80 enable dlab
12a2 : 0101     |     ldi r1, 32
12a4 : 8c00     |     stw 0(bp), r1		; port + 0 set divisor to 1 LSB
12a6 : 0001     |     ldi r1, 0
12a8 : 8c04     |     stw 1(bp), r1		; port + 1 set divisor to 1 MSB
12aa : 0019     |     ldi r1, 3
12ac : 8c0c     |     stw 3(bp), r1		; port + 3 set LCR - validate
12ae : c005     |     pop	bp
12b0 : c007     |     pop	pc; MEMSET (char *dst, int c, uint n)
     :          | _memset:
12b2 : be01     |     push	r1
12b4 : be05     |     push	bp
12b6 : 9585     |     mov	bp, sp
12b8 : 8810     |     ldw	r1,4(bp) ; load dst
12ba : 8819     |     ldw	r2,6(bp) ; load c
12bc : 8822     |     ldw	r3,8(bp) ; load n
12be : a61c     |     andi r4,r3,1
12c0 : 9d00     |     skip.eq r4, r0
12c2 : 2018     |     br _stosb
12c4 : a60c     |     andi r4, r1, 1
12c6 : 9d00     |     skip.eq r4, r0
12c8 : 2012     |     br _stosb
12ca : db0b     |     shl r4, r2, 8
12cc : 9aa2     |     or r2, r2, r4
12ce : a45b     |     subi r3, r3, 2
     :          | _stoswL1:
12d0 : 945c     |     add	r4,r1,r3
12d2 : b422     |     stw	r0(r4),r2
12d4 : ad9b     |     addskpi.z r3, r3, -2
12d6 : 3ff8     |     br _stoswL1
12d8 : b40a     |     stw r0(r1), r2
12da : 200c     |     br _memsetend
     :          | _stosb:
12dc : a41b     |     subi r3, r3, 1
     :          | _stosbL1:
12de : 945c     |     add	r4,r1,r3
12e0 : b622     |     stb	r0(r4),r2
12e2 : addb     |     addskpi.z r3, r3, -1
12e4 : 3ff8     |     br _stosbL1
12e6 : b60a     |     stb r0(r1), r2
     :          | _memsetend:
12e8 : c005     |     pop	bp
12ea : c007     |     pop	pc
     :          | _halt:
12ec : fe00     |     hlt
     :          | _breek:
12ee : be01     |     push r1
12f0 : ca00     |     brk
12f2 : c007     |     pop pc
     :          | _writepte:
12f4 : be01     |     push r1
12f6 : be05     |     push bp
12f8 : 9585     |     mov bp, sp
12fa : 8810     |     ldw r1, 4(bp)
12fc : 8819     |     ldw r2, 6(bp)
12fe : d050     |     wpte r1, r2
1300 : c005     |     pop bp
1302 : c007     |     pop pc
     :          | _switchptb:
1304 : be01     |     push r1
1306 : be05     |     push bp
1308 : 9585     |     mov bp, sp
130a : 8810     |     ldw r1, 4(bp)
130c : d440     |     wptb r1
130e : c005     |     pop bp
1310 : c007     |     pop pc
     :          | _clearptb:
1312 : be01     |     push r1
1314 : be05     |     push bp
1316 : 9585     |     mov bp, sp
1318 : 8810     |     ldw r1, 4(bp)
131a : 0102     |     ldi r2, 32 ; one extra cause we sub 1 in loop
131c : 9452     |     add r2, r1, r2
     :          | _clearptbL1:
131e : a412     |     subi r2, r2, 1
1320 : d080     |     wpte r2, 0
1322 : 9c88     |     skip.eq r2, r1
1324 : 3ff8     |     br _clearptbL1
1326 : c005     |     pop bp
1328 : c007     |     pop pc
     :          | _memmove:
132a : be01     |     push	r1
132c : be05     |     push	bp
132e : 9585     |     mov	bp, sp
1330 : 8813     |     ldw	r4,4(bp)    ; dst
1332 : 881a     |     ldw	r3,6(bp)    ; src
1334 : 8821     |     ldw	r2,8(bp)    ; n
1336 : 9514     |     add	r4,r4,r2
1338 : 94d3     |     add	r3,r3,r2
133a : 200a     |     br _memmoveL3
     :          | _memmoveL2:
133c : a412     |     subi	r2,r2,1
133e : a3db     |     addi	r3,r3,-1
1340 : a3e4     |     addi	r4,r4,-1
1342 : b219     |     ldb	r1,r0(r3)
1344 : b621     |     stb	r0(r4),r1
     :          | _memmoveL3:
1346 : 9c80     |     skip.eq r2,r0
1348 : 3ff2     |     br _memmoveL2
134a : 94c1     |     mov	r1,r3
134c : 9546     |     mov	sp, bp
134e : c005     |     pop	bp
1350 : c007     |     pop	pc;	DME assembly file, generated by lcc 4.2
     :          | _initkmem:
1352 : be01     |     push	r1
1354 : be05     |     push	bp
1356 : 9585     |     mov	bp, sp
1358 : 0014     |     ldi	r4, 2
135a : 97a6     |     sub	sp, sp, r4
135c : 000c     |     ld16	r4, 1
135e : 8dfb     |     stw	-2(bp),r4
     :          | L2_kalloc:
1360 : 89fb     |     ldw	r4,-2(bp)
1362 : da33     |     shl	r4, r4, 1 ; [via index]
1364 : 0f63     |     la16	r3,_pframe
1366 : bc32     |     
1368 : 0ffa     |     ld16	r2, 0xffff
136a : bdfd     |     
136c : b51a     |     stw	r4(r3),r2
     :          | L3_kalloc:
136e : 89fb     |     ldw	r4,-2(bp)
1370 : a224     |     addi	r4,r4,1
1372 : 8dfb     |     stw	-2(bp),r4
1374 : 89fb     |     ldw	r4,-2(bp)
1376 : 0073     |     ld16	r3, 14
1378 : 9d1c     |     skip.gt	r4,r3
137a : 3fe4     |     br	L2_kalloc
137c : 0f64     |     la16	r4,_pframe
137e : bc33     |     
1380 : 0ffb     |     ld16	r3, 4095
1382 : bc1e     |     
1384 : b423     |     stw	r0(r4),r3
1386 : 0054     |     la16	r4,_pframe+30
1388 : bc37     |     
138a : 0ff3     |     ld16	r3, 0xfffe
138c : bdfe     |     
138e : b423     |     stw	r0(r4),r3
     :          | L1_kalloc:
1390 : 9546     |     mov	sp, bp
1392 : c005     |     pop	bp
1394 : c007     |     pop	pc
     :          | _findfreepg:
1396 : be01     |     push	r1
1398 : be05     |     push	bp
139a : 9585     |     mov	bp, sp
139c : 0034     |     ldi	r4, 6
139e : 97a6     |     sub	sp, sp, r4
13a0 : 91e8     |     stw	-6(bp),r0
     :          | L8_kalloc:
13a2 : 89eb     |     ldw	r4,-6(bp)
13a4 : da33     |     shl	r4, r4, 1 ; [via index]
13a6 : 0f63     |     la16	r3,_pframe
13a8 : bc32     |     
13aa : b11c     |     ldw	r4,r4(r3)
13ac : 9d00     |     skip.eq r4,r0
13ae : 2006     |     br L1_kalloc2
13b0 : 0fa4     |     la16	r4,L9_kalloc
13b2 : bc27     |     
13b4 : c204     |     br.r r4
     :          | L1_kalloc2:
13b6 : 007c     |     ld16	r4, 15
13b8 : 8dfb     |     stw	-2(bp),r4
     :          | L1_kalloc4:
13ba : 000c     |     ld16	r4, 1
13bc : 89fa     |     ldw	r3,-2(bp)
13be : df1c     |     shl.r	r4, r4, r3
13c0 : 8df3     |     stw	-4(bp),r4
13c2 : 89f3     |     ldw	r4,-4(bp)
13c4 : 89ea     |     ldw	r3,-6(bp)
13c6 : da2e     |     shl	r3, r3, 1 ; [via index]
13c8 : 0f62     |     la16	r2,_pframe
13ca : bc31     |     
13cc : b0d3     |     ldw	r3,r3(r2)
13ce : 991c     |     and	r4,r4,r3
13d0 : 9d01     |     skip.ne	r4,r0
13d2 : 2014     |     br	L1_kalloc8
13d4 : 89eb     |     ldw	r4,-6(bp)
13d6 : da93     |     shl	r4, r4, 4
13d8 : 007b     |     ld16	r3, 15
13da : 89f9     |     ldw	r2,-2(bp)
13dc : 96d3     |     sub	r3,r3,r2
13de : 951c     |     add	r4,r4,r3
13e0 : 9501     |     mov	r1,r4
13e2 : 00b4     |     la16	r4,L7_kalloc
13e4 : bc2b     |     
13e6 : c204     |     br.r r4
     :          | L1_kalloc8:
13e8 : 89fb     |     ldw	r4,-2(bp)
13ea : a424     |     subi	r4,r4,1
13ec : 8dfb     |     stw	-2(bp),r4
13ee : 89fb     |     ldw	r4,-2(bp)
13f0 : 9d02     |     skip.lt r4, r0
13f2 : 3fc6     |     br L1_kalloc4
     :          | L9_kalloc:
13f4 : 89eb     |     ldw	r4,-6(bp)
13f6 : a224     |     addi	r4,r4,1
13f8 : 8deb     |     stw	-6(bp),r4
13fa : 89eb     |     ldw	r4,-6(bp)
13fc : 0083     |     ld16	r3, 16
13fe : 9d1c     |     skip.gt	r4,r3
1400 : 3fa0     |     br	L8_kalloc
1402 : 09d4     |     la16	r4,L2_kalloc0
1404 : bc33     |     
1406 : be04     |     push	r4
1408 : 0812     |     la16	r2,_kprintf
140a : bc21     |     
140c : a279     |     addi	r1,pc,2
140e : c202     |     br.r	r2
1410 : 0012     |     ldi	r2,2
1412 : 9596     |     add	sp,sp,r2
1414 : 9401     |     mov	r1,r0
     :          | L7_kalloc:
1416 : 9546     |     mov	sp, bp
1418 : c005     |     pop	bp
141a : c007     |     pop	pc
     :          | _kalloc:
141c : be01     |     push	r1
141e : be05     |     push	bp
1420 : 9585     |     mov	bp, sp
1422 : 0084     |     ldi	r4, 16
1424 : 97a6     |     sub	sp, sp, r4
1426 : 0cb2     |     la16	r2,_findfreepg ; jaddr
1428 : bc25     |     
142a : a279     |     addi	r1,pc,2
142c : c202     |     br.r	r2
142e : 9444     |     mov	r4,r1
1430 : 8dfb     |     stw	-2(bp),r4
1432 : 89fb     |     ldw	r4,-2(bp)
1434 : 8de3     |     stw	-8(bp),r4
1436 : 0083     |     ld16	r3, 16
1438 : 8dda     |     stw	-10(bp),r3
143a : be05     |     push bp
143c : be04     |     push r4
143e : be03     |     push r3
1440 : a27d     |     addi bp, pc, 2
1442 : 2456     |     br _div
1444 : c005     |     pop bp
1446 : 8df0     |     stw	-4(bp),r1
1448 : 000c     |     ld16	r4, 1
144a : 8dc3     |     stw	-16(bp),r4
144c : 007b     |     ld16	r3, 15
144e : 8dca     |     stw	-14(bp),r3
1450 : 89e1     |     ldw	r2,-8(bp)
1452 : 8dd1     |     stw	-12(bp),r2
1454 : 89d8     |     ldw	r1,-10(bp)
1456 : be05     |     push bp
1458 : be02     |     push r2
145a : be01     |     push r1
145c : a27d     |     addi bp, pc, 2
145e : 2460     |     br _mod
1460 : c005     |     pop bp
1462 : 89cb     |     ldw	r4,-14(bp)
1464 : 970c     |     sub	r4,r4,r1
1466 : 89c2     |     ldw	r3,-16(bp)
1468 : dee4     |     shl.r	r4, r3, r4
146a : 9624     |     sub	r4,r0,r4
146c : a424     |     subi	r4,r4,1
146e : 8deb     |     stw	-6(bp),r4
1470 : 89f3     |     ldw	r4,-4(bp)
1472 : da33     |     shl	r4, r4, 1
1474 : 0f63     |     la16	r3,_pframe
1476 : bc32     |     
1478 : 951c     |     add	r4,r4,r3
147a : b023     |     ldw	r3,r0(r4)
147c : 89e9     |     ldw	r2,-6(bp)
147e : 98d3     |     and	r3,r3,r2
1480 : b423     |     stw	r0(r4),r3
1482 : 89fb     |     ldw	r4,-2(bp)
1484 : 9501     |     mov	r1,r4
     :          | L2_kalloc1:
1486 : 9546     |     mov	sp, bp
1488 : c005     |     pop	bp
148a : c007     |     pop	pc
     :          | _initpag:
148c : be01     |     push	r1
148e : be05     |     push	bp
1490 : 9585     |     mov	bp, sp
1492 : 0a92     |     la16	r2,_initkmem
1494 : bc25     |     
1496 : a279     |     addi	r1,pc,2
1498 : c202     |     br.r	r2
     :          | L1_vm:
149a : 9546     |     mov	sp, bp
149c : c005     |     pop	bp
149e : c007     |     pop	pc
     :          | _setupkvm:
14a0 : be01     |     push	r1
14a2 : be05     |     push	bp
14a4 : 9585     |     mov	bp, sp
14a6 : 000c     |     ld16	r4, 1
14a8 : be04     |     push	r4
14aa : 8813     |     ldw	r4,4(bp)
14ac : a264     |     addi	r4,r4,2
14ae : be04     |     push	r4
14b0 : 07a2     |     la16	r2,_writepte
14b2 : bc25     |     
14b4 : a279     |     addi	r1,pc,2
14b6 : c202     |     br.r	r2
14b8 : 0022     |     ldi	r2,4
14ba : 9596     |     add	sp,sp,r2
14bc : 080c     |     ld16	r4, 257
14be : be04     |     push	r4
14c0 : 8813     |     ldw	r4,4(bp)
14c2 : 001b     |     ld16	r3, 3
14c4 : 951c     |     add	r4,r4,r3
14c6 : be04     |     push	r4
14c8 : 07a2     |     la16	r2,_writepte
14ca : bc25     |     
14cc : a279     |     addi	r1,pc,2
14ce : c202     |     br.r	r2
14d0 : 0022     |     ldi	r2,4
14d2 : 9596     |     add	sp,sp,r2
14d4 : 000c     |     ld16	r4, 513
14d6 : bc07     |     
14d8 : be04     |     push	r4
14da : 8813     |     ldw	r4,4(bp)
14dc : a2a4     |     addi	r4,r4,4
14de : be04     |     push	r4
14e0 : 07a2     |     la16	r2,_writepte
14e2 : bc25     |     
14e4 : a279     |     addi	r1,pc,2
14e6 : c202     |     br.r	r2
14e8 : 0022     |     ldi	r2,4
14ea : 9596     |     add	sp,sp,r2
14ec : 881b     |     ldw	r4,6(bp)
14ee : db13     |     shl	r4, r4, 8
14f0 : 001b     |     ld16	r3, 3
14f2 : 9b1c     |     or	r4,r4,r3
14f4 : be04     |     push	r4
14f6 : 8813     |     ldw	r4,4(bp)
14f8 : 00fb     |     ld16	r3, 31
14fa : 951c     |     add	r4,r4,r3
14fc : be04     |     push	r4
14fe : 07a2     |     la16	r2,_writepte
1500 : bc25     |     
1502 : a279     |     addi	r1,pc,2
1504 : c202     |     br.r	r2
1506 : 0022     |     ldi	r2,4
1508 : 9596     |     add	sp,sp,r2
     :          | L2_vm:
150a : 9546     |     mov	sp, bp
150c : c005     |     pop	bp
150e : c007     |     pop	pc
     :          | _getkstack:
1510 : be01     |     push	r1
1512 : be05     |     push	bp
1514 : 9585     |     mov	bp, sp
1516 : 0024     |     ldi	r4, 4
1518 : 97a6     |     sub	sp, sp, r4
151a : 00e2     |     la16	r2,_kalloc
151c : bc29     |     
151e : a279     |     addi	r1,pc,2
1520 : c202     |     br.r	r2
1522 : 9444     |     mov	r4,r1
1524 : 8dfb     |     stw	-2(bp),r4
1526 : 89fb     |     ldw	r4,-2(bp)
1528 : db13     |     shl	r4, r4, 8
152a : 001b     |     ld16	r3, 3
152c : 9b1c     |     or	r4,r4,r3
152e : 8df3     |     stw	-4(bp),r4
1530 : 89f3     |     ldw	r4,-4(bp)
1532 : be04     |     push	r4
1534 : 01f4     |     ld16	r4, 62
1536 : be04     |     push	r4
1538 : 07a2     |     la16	r2,_writepte
153a : bc25     |     
153c : a279     |     addi	r1,pc,2
153e : c202     |     br.r	r2
1540 : 0022     |     ldi	r2,4
1542 : 9596     |     add	sp,sp,r2
1544 : 89f8     |     ldw	r1,-2(bp)
     :          | L3_vm:
1546 : 9546     |     mov	sp, bp
1548 : c005     |     pop	bp
154a : c007     |     pop	pc
     :          | _addpage:
154c : be01     |     push	r1
154e : be05     |     push	bp
1550 : 9585     |     mov	bp, sp
1552 : 0024     |     ldi	r4, 4
1554 : 97a6     |     sub	sp, sp, r4
1556 : 881b     |     ldw	r4,6(bp)
1558 : 8e1b     |     stb	6(bp),r4
155a : 00e2     |     la16	r2,_kalloc
155c : bc29     |     
155e : a279     |     addi	r1,pc,2
1560 : c202     |     br.r	r2
1562 : 9444     |     mov	r4,r1
1564 : 8dfb     |     stw	-2(bp),r4
1566 : 89fb     |     ldw	r4,-2(bp)
1568 : db13     |     shl	r4, r4, 8
156a : 8a1a     |     ldb	r3,6(bp)
156c : 9b1c     |     or	r4,r4,r3
156e : 8df3     |     stw	-4(bp),r4
1570 : 89f3     |     ldw	r4,-4(bp)
1572 : be04     |     push	r4
1574 : 8813     |     ldw	r4,4(bp)
1576 : be04     |     push	r4
1578 : 07a2     |     la16	r2,_writepte
157a : bc25     |     
157c : a279     |     addi	r1,pc,2
157e : c202     |     br.r	r2
1580 : 0022     |     ldi	r2,4
1582 : 9596     |     add	sp,sp,r2
1584 : 89f8     |     ldw	r1,-2(bp)
     :          | L4_vm:
1586 : 9546     |     mov	sp, bp
1588 : c005     |     pop	bp
158a : c007     |     pop	pc
     :          | _inituvm:
158c : be01     |     push	r1
158e : be05     |     push	bp
1590 : 9585     |     mov	bp, sp
1592 : 0014     |     ldi	r4, 2
1594 : 97a6     |     sub	sp, sp, r4
1596 : 00e2     |     la16	r2,_kalloc
1598 : bc29     |     
159a : a279     |     addi	r1,pc,2
159c : c202     |     br.r	r2
159e : 9444     |     mov	r4,r1
15a0 : 8dfb     |     stw	-2(bp),r4
15a2 : 89fb     |     ldw	r4,-2(bp)
15a4 : db13     |     shl	r4, r4, 8
15a6 : a824     |     ori	r4,r4,1
15a8 : be04     |     push	r4
15aa : 0104     |     ld16	r4, 32
15ac : be04     |     push	r4
15ae : 07a2     |     la16	r2,_writepte
15b0 : bc25     |     
15b2 : a279     |     addi	r1,pc,2
15b4 : c202     |     br.r	r2
15b6 : 0022     |     ldi	r2,4
15b8 : 9596     |     add	sp,sp,r2
15ba : 89fb     |     ldw	r4,-2(bp)
15bc : db13     |     shl	r4, r4, 8
15be : a824     |     ori	r4,r4,1
15c0 : be04     |     push	r4
15c2 : 8813     |     ldw	r4,4(bp)
15c4 : be04     |     push	r4
15c6 : 07a2     |     la16	r2,_writepte
15c8 : bc25     |     
15ca : a279     |     addi	r1,pc,2
15cc : c202     |     br.r	r2
15ce : 0022     |     ldi	r2,4
15d0 : 9596     |     add	sp,sp,r2
15d2 : 0194     |     ld16	r4, 50
15d4 : be04     |     push	r4
15d6 : 881b     |     ldw	r4,6(bp)
15d8 : be04     |     push	r4
15da : be00     |     push	r0
15dc : 0952     |     la16	r2,_memmove
15de : bc25     |     
15e0 : a279     |     addi	r1,pc,2
15e2 : c202     |     br.r	r2
15e4 : 0032     |     ldi	r2,6
15e6 : 9596     |     add	sp,sp,r2
     :          | L5_vm:
15e8 : 9546     |     mov	sp, bp
15ea : c005     |     pop	bp
15ec : c007     |     pop	pc
     :          | _pinit:
15ee : be01     |     push	r1
15f0 : be05     |     push	bp
15f2 : 9585     |     mov	bp, sp
15f4 : 0024     |     ldi	r4, 4
15f6 : 97a6     |     sub	sp, sp, r4
15f8 : 91f0     |     stw	-4(bp),r0
15fa : 0d04     |     ld16	r4, 416
15fc : be04     |     push	r4
15fe : be00     |     push	r0
1600 : 0084     |     la16	r4,_ptable
1602 : bc37     |     
1604 : be04     |     push	r4
1606 : 0592     |     la16	r2,_memset
1608 : bc25     |     
160a : a279     |     addi	r1,pc,2
160c : c202     |     br.r	r2
160e : 0032     |     ldi	r2,6
1610 : 9596     |     add	sp,sp,r2
1612 : 0084     |     la16	r4,_ptable
1614 : bc37     |     
1616 : 8dfb     |     stw	-2(bp),r4
1618 : 01a4     |     la16	r4,L5_proc
161a : bc2f     |     
161c : c204     |     br.r r4
     :          | L2_proc:
161e : 89fb     |     ldw	r4,-2(bp)
1620 : a264     |     addi	r4,r4,2
1622 : 89f2     |     ldw	r3,-4(bp)
1624 : b423     |     stw	r0(r4),r3
1626 : 89f3     |     ldw	r4,-4(bp)
1628 : a224     |     addi	r4,r4,1
162a : 8df3     |     stw	-4(bp),r4
     :          | L3_proc:
162c : 89fb     |     ldw	r4,-2(bp)
162e : 00d3     |     ld16	r3, 26
1630 : 951c     |     add	r4,r4,r3
1632 : 8dfb     |     stw	-2(bp),r4
     :          | L5_proc:
1634 : 89fb     |     ldw	r4,-2(bp)
1636 : 0d83     |     la16	r3,_ptable+416
1638 : bc36     |     
163a : 9ce6     |     skip.ult	r3,r4
163c : 3fe0     |     br	L2_proc
163e : 0cd4     |     la16	r4,L7_proc
1640 : bc33     |     
1642 : be04     |     push	r4
1644 : 0812     |     la16	r2,_kprintf
1646 : bc21     |     
1648 : a279     |     addi	r1,pc,2
164a : c202     |     br.r	r2
164c : 0012     |     ldi	r2,2
164e : 9596     |     add	sp,sp,r2
1650 : 0064     |     la16	r4,_nextpid
1652 : bc37     |     
1654 : b420     |     stw	r0(r4),r0
     :          | L1_proc:
1656 : 9546     |     mov	sp, bp
1658 : c005     |     pop	bp
165a : c007     |     pop	pc
     :          | _allocproc:
165c : be01     |     push	r1
165e : be05     |     push	bp
1660 : 9585     |     mov	bp, sp
1662 : 0024     |     ldi	r4, 4
1664 : 97a6     |     sub	sp, sp, r4
1666 : 0084     |     la16	r4,_ptable
1668 : bc37     |     
166a : 8dfb     |     stw	-2(bp),r4
166c : 0454     |     la16	r4,L1_proc2
166e : bc2f     |     
1670 : c204     |     br.r r4
     :          | L9_proc:
1672 : 89fb     |     ldw	r4,-2(bp)
1674 : a2e4     |     addi	r4,r4,8
1676 : b024     |     ldw	r4,r0(r4)
1678 : 9d00     |     skip.eq r4,r0
167a : 2006     |     br L1_proc4
167c : 0574     |     la16	r4,L1_proc6
167e : bc2f     |     
1680 : c204     |     br.r r4
     :          | L1_proc4:
1682 : 89fb     |     ldw	r4,-2(bp)
1684 : 00d3     |     ld16	r3, 26
1686 : 951c     |     add	r4,r4,r3
1688 : 8dfb     |     stw	-2(bp),r4
     :          | L1_proc2:
168a : 89fb     |     ldw	r4,-2(bp)
168c : 0d83     |     la16	r3,_ptable+416
168e : bc36     |     
1690 : 9ce6     |     skip.ult	r3,r4
1692 : 3fde     |     br	L9_proc
1694 : 0bb4     |     la16	r4,L1_proc7
1696 : bc33     |     
1698 : be04     |     push	r4
169a : 0812     |     la16	r2,_kprintf
169c : bc21     |     
169e : a279     |     addi	r1,pc,2
16a0 : c202     |     br.r	r2
16a2 : 0012     |     ldi	r2,2
16a4 : 9596     |     add	sp,sp,r2
16a6 : 0762     |     la16	r2,_halt
16a8 : bc25     |     
16aa : a279     |     addi	r1,pc,2
16ac : c202     |     br.r	r2
     :          | L1_proc6:
16ae : 89fb     |     ldw	r4,-2(bp)
16b0 : a264     |     addi	r4,r4,2
16b2 : b024     |     ldw	r4,r0(r4)
16b4 : be04     |     push	r4
16b6 : 0af4     |     la16	r4,L1_proc8
16b8 : bc33     |     
16ba : be04     |     push	r4
16bc : 0812     |     la16	r2,_kprintf
16be : bc21     |     
16c0 : a279     |     addi	r1,pc,2
16c2 : c202     |     br.r	r2
16c4 : 0022     |     ldi	r2,4
16c6 : 9596     |     add	sp,sp,r2
16c8 : 001c     |     ld16	r4, 3
16ca : be04     |     push	r4
16cc : 01f4     |     ld16	r4, 62
16ce : be04     |     push	r4
16d0 : 0a62     |     la16	r2,_addpage
16d2 : bc29     |     
16d4 : a279     |     addi	r1,pc,2
16d6 : c202     |     br.r	r2
16d8 : 0022     |     ldi	r2,4
16da : 9596     |     add	sp,sp,r2
16dc : 89fa     |     ldw	r3,-2(bp)
16de : 0032     |     ld16	r2, 6
16e0 : 94d3     |     add	r3,r3,r2
16e2 : 9444     |     mov	r4,r1
16e4 : b41c     |     stw	r0(r3),r4
16e6 : 89fb     |     ldw	r4,-2(bp)
16e8 : a2e4     |     addi	r4,r4,8
16ea : 000b     |     ld16	r3, 1
16ec : b423     |     stw	r0(r4),r3
16ee : 89fb     |     ldw	r4,-2(bp)
16f0 : 0053     |     ld16	r3, 10
16f2 : 951c     |     add	r4,r4,r3
16f4 : 0063     |     la16	r3,_nextpid
16f6 : bc36     |     
16f8 : b01b     |     ldw	r3,r0(r3)
16fa : b423     |     stw	r0(r4),r3
16fc : 0064     |     la16	r4,_nextpid
16fe : bc37     |     
1700 : b023     |     ldw	r3,r0(r4)
1702 : a21b     |     addi	r3,r3,1
1704 : b423     |     stw	r0(r4),r3
1706 : 0804     |     ld16	r4, 0xf700
1708 : bdef     |     
170a : 8df3     |     stw	-4(bp),r4
170c : 89f3     |     ldw	r4,-4(bp)
170e : 1f83     |     ld16	r3, -16
1710 : 951c     |     add	r4,r4,r3
1712 : 8df3     |     stw	-4(bp),r4
1714 : 89fb     |     ldw	r4,-2(bp)
1716 : 0063     |     ld16	r3, 12
1718 : 951c     |     add	r4,r4,r3
171a : 89f2     |     ldw	r3,-4(bp)
171c : 0002     |     ld16	r2, 2048
171e : bc11     |     
1720 : 94d3     |     add	r3,r3,r2
1722 : b423     |     stw	r0(r4),r3
1724 : 89f3     |     ldw	r4,-4(bp)
1726 : a3a4     |     addi	r4,r4,-2
1728 : 8df3     |     stw	-4(bp),r4
172a : 89f3     |     ldw	r4,-4(bp)
172c : 0003     |     la16	r3,_cntxret
172e : bc32     |     
1730 : b423     |     stw	r0(r4),r3
1732 : 89f3     |     ldw	r4,-4(bp)
1734 : a3a4     |     addi	r4,r4,-2
1736 : 8df3     |     stw	-4(bp),r4
1738 : 89fb     |     ldw	r4,-2(bp)
173a : a2a4     |     addi	r4,r4,4
173c : 89f2     |     ldw	r3,-4(bp)
173e : 0002     |     ld16	r2, 2048
1740 : bc11     |     
1742 : 94d3     |     add	r3,r3,r2
1744 : b423     |     stw	r0(r4),r3
1746 : 89f8     |     ldw	r1,-2(bp)
     :          | L8_proc:
1748 : 9546     |     mov	sp, bp
174a : c005     |     pop	bp
174c : c007     |     pop	pc
     :          | _userinit:
174e : be01     |     push	r1
1750 : be05     |     push	bp
1752 : 9585     |     mov	bp, sp
1754 : 0024     |     ldi	r4, 4
1756 : 97a6     |     sub	sp, sp, r4
1758 : 02e2     |     la16	r2,_allocproc ; jaddr
175a : bc2d     |     
175c : a279     |     addi	r1,pc,2
175e : c202     |     br.r	r2
1760 : 8df8     |     stw	-2(bp),r1
1762 : 89fb     |     ldw	r4,-2(bp)
1764 : 0033     |     ld16	r3, 6
1766 : 951b     |     add	r3,r4,r3
1768 : b01b     |     ldw	r3,r0(r3)
176a : be03     |     push	r3
176c : a264     |     addi	r4,r4,2
176e : b024     |     ldw	r4,r0(r4)
1770 : be04     |     push	r4
1772 : 0502     |     la16	r2,_setupkvm
1774 : bc29     |     
1776 : a279     |     addi	r1,pc,2
1778 : c202     |     br.r	r2
177a : 0022     |     ldi	r2,4
177c : 9596     |     add	sp,sp,r2
177e : 0874     |     la16	r4,_initcodestart
1780 : bc33     |     
1782 : be04     |     push	r4
1784 : 89fb     |     ldw	r4,-2(bp)
1786 : a264     |     addi	r4,r4,2
1788 : b024     |     ldw	r4,r0(r4)
178a : be04     |     push	r4
178c : 0c62     |     la16	r2,_inituvm
178e : bc29     |     
1790 : a279     |     addi	r1,pc,2
1792 : c202     |     br.r	r2
1794 : 0022     |     ldi	r2,4
1796 : 9596     |     add	sp,sp,r2
1798 : 0784     |     ld16	r4, 0xf6f0
179a : bdef     |     
179c : 8df3     |     stw	-4(bp),r4
179e : 89f3     |     ldw	r4,-4(bp)
17a0 : 0053     |     ld16	r3, 10
17a2 : 951c     |     add	r4,r4,r3
17a4 : 0003     |     ld16	r3, 2048
17a6 : bc12     |     
17a8 : b423     |     stw	r0(r4),r3
17aa : 89f3     |     ldw	r4,-4(bp)
17ac : 0063     |     ld16	r3, 12
17ae : 951c     |     add	r4,r4,r3
17b0 : b420     |     stw	r0(r4),r0
17b2 : 89f3     |     ldw	r4,-4(bp)
17b4 : 0073     |     ld16	r3, 14
17b6 : 951c     |     add	r4,r4,r3
17b8 : 0063     |     ld16	r3, 12
17ba : b423     |     stw	r0(r4),r3
17bc : 89fb     |     ldw	r4,-2(bp)
17be : a2e4     |     addi	r4,r4,8
17c0 : 001b     |     ld16	r3, 3
17c2 : b423     |     stw	r0(r4),r3
17c4 : 89fb     |     ldw	r4,-2(bp)
17c6 : a2a3     |     addi	r3,r4,4
17c8 : b01b     |     ldw	r3,r0(r3)
17ca : be03     |     push	r3
17cc : a264     |     addi	r4,r4,2
17ce : b024     |     ldw	r4,r0(r4)
17d0 : be04     |     push	r4
17d2 : 0074     |     la16	r4,_stable
17d4 : bc37     |     
17d6 : be04     |     push	r4
17d8 : 00b2     |     la16	r2,_swtch
17da : bc31     |     
17dc : a279     |     addi	r1,pc,2
17de : c202     |     br.r	r2
17e0 : 0032     |     ldi	r2,6
17e2 : 9596     |     add	sp,sp,r2
     :          | L1_proc9:
17e4 : 9546     |     mov	sp, bp
17e6 : c005     |     pop	bp
17e8 : c007     |     pop	pc
     :          | _alltraps:
17ea : 0103     |     ldi r3, 0x20
17ec : 985c     |     and r4, r1, r3
17ee : 9d18     |     skip.eq r4, r3
17f0 : 2002     |     br tohandler_trapasm
17f2 : fe00     |     hlt
     :          | tohandler_trapasm:
17f4 : c806     |     push.u sp
17f6 : be01     |     push r1 	;trapnr
17f8 : 0163     |     la16 r3, _trap
17fa : bc32     |     
17fc : a279     |     addi r1, pc, 2
17fe : c203     |     br.r r3
     :          | _cntxret:
1800 : e201     |     pop.u r1
1802 : e202     |     pop.u r2
1804 : e203     |     pop.u r3
1806 : e204     |     pop.u r4
1808 : e205     |     pop.u bp
180a : e206     |     pop.u sp
180c : e207     |     pop.u pc
180e : c001     |     pop r1
1810 : e640     |     wcr.u r1
1812 : c600     |     reti
     :          | _trapret:
1814 : ca00     |     brk
     :          | _swtch:
1816 : be01     |     push r1
1818 : be05     |     push bp
181a : 9585     |     mov bp, sp
181c : 8810     |     ldw r1, 4(bp) ; sched->context (to save SP)
181e : 8819     |     ldw r2, 6(bp) ; ptb
1820 : 8822     |     ldw r3, 8(bp) ; context (= new SP)
1822 : b40e     |     stw r0(r1), sp  ; store old sp in sched->context
1824 : d480     |     wptb r2					; switch to new address space
1826 : 94c6     |     mov sp, r3      ; switch sp to new stack bottom
1828 : c005     |     pop bp
182a : c007     |     pop pc
     :          | _trap:
182c : be01     |     push	r1
182e : be05     |     push	bp
1830 : 9585     |     mov	bp, sp
1832 : 881b     |     ldw	r4,6(bp)
1834 : be04     |     push	r4
1836 : 8813     |     ldw	r4,4(bp)
1838 : be04     |     push	r4
183a : 0db4     |     la16	r4,L2_trap
183c : bc33     |     
183e : be04     |     push	r4
1840 : 0812     |     la16	r2,_kprintf
1842 : bc21     |     
1844 : a279     |     addi	r1,pc,2
1846 : c202     |     br.r	r2
1848 : 0032     |     ldi	r2,6
184a : 9596     |     add	sp,sp,r2
184c : 0762     |     la16	r2,_halt
184e : bc25     |     
1850 : a279     |     addi	r1,pc,2
1852 : c202     |     br.r	r2
     :          | L1_trap:
1854 : 9546     |     mov	sp, bp
1856 : c005     |     pop	bp
1858 : c007     |     pop	pc
     :          | _kmain:
185a : be01     |     push	r1
185c : be05     |     push	bp
185e : 9585     |     mov	bp, sp
1860 : 0e44     |     la16	r4,L2_kmain
1862 : bc33     |     
1864 : be04     |     push	r4
1866 : 0812     |     la16	r2,_kprintf
1868 : bc21     |     
186a : a279     |     addi	r1,pc,2
186c : c202     |     br.r	r2
186e : 0012     |     ldi	r2,2
1870 : 9596     |     add	sp,sp,r2
1872 : 0a92     |     la16	r2,_initkmem
1874 : bc25     |     
1876 : a279     |     addi	r1,pc,2
1878 : c202     |     br.r	r2
187a : 0f72     |     la16	r2,_pinit
187c : bc29     |     
187e : a279     |     addi	r1,pc,2
1880 : c202     |     br.r	r2
1882 : 0a72     |     la16	r2,_userinit
1884 : bc2d     |     
1886 : a279     |     addi	r1,pc,2
1888 : c202     |     br.r	r2
188a : 0762     |     la16	r2,_halt
188c : bc25     |     
188e : a279     |     addi	r1,pc,2
1890 : c202     |     br.r	r2
1892 : 9401     |     mov	r1,r0
     :          | L1_kmain:
1894 : 9546     |     mov	sp, bp
1896 : c005     |     pop	bp
1898 : c007     |     pop	pc
     :          | _div:
189a : c003     |     pop r3 ; op1
189c : c002     |     pop r2 ; op2
189e : 9401     |     mov r1, r0
18a0 : 000c     |     ldi r4, 1
     :          | divL1_pseudo_ops:
18a2 : 9c9c     |     skip.gt r2, r3
18a4 : 2006     |     br divL2_pseudo_ops
18a6 : da2e     |     shl r3, r3, 1
18a8 : da33     |     shl r4, r4, 1
18aa : 3ff6     |     br divL1_pseudo_ops
     :          | divL2_pseudo_ops:
18ac : afe0     |     addskpi.nz r0, r4, -1
18ae : 200e     |     br divL3_pseudo_ops
18b0 : dc2e     |     shr r3, r3, 1
18b2 : dc33     |     shr r4, r4, 1
18b4 : 9c9d     |     skip.gte r2, r3
18b6 : 3ff4     |     br divL2_pseudo_ops
18b8 : 969a     |     sub r2, r2, r3
18ba : 9a61     |     or	r1, r1, r4
18bc : 3fee     |     br divL2_pseudo_ops
     :          | divL3_pseudo_ops:
18be : c205     |     br.r bp ; return
     :          | _mod:
18c0 : c003     |     pop r3 ; op1
18c2 : c002     |     pop r2 ; op2
18c4 : 000c     |     ldi r4, 1
     :          | modL1_pseudo_ops:
18c6 : 9c9c     |     skip.gt r2, r3
18c8 : 2006     |     br modL2_pseudo_ops
18ca : da2e     |     shl r3, r3, 1
18cc : da33     |     shl r4, r4, 1
18ce : 3ff6     |     br modL1_pseudo_ops
     :          | modL2_pseudo_ops:
18d0 : afe0     |     addskpi.nz r0, r4, -1
18d2 : 200c     |     br modL3_pseudo_ops
18d4 : dc2e     |     shr r3, r3, 1
18d6 : dc33     |     shr r4, r4, 1
18d8 : 9c9d     |     skip.gte r2, r3
18da : 3ff4     |     br modL2_pseudo_ops
18dc : 969a     |     sub r2, r2, r3
18de : 3ff0     |     br modL2_pseudo_ops
     :          | modL3_pseudo_ops:
18e0 : 9481     |     mov r1, r2
18e2 : c205     |     br.r bp ; return
     :          | _mult:
18e4 : c002     |     pop r2 ; op1
18e6 : c003     |     pop r3 ; op2
18e8 : 9401     |     mov r1, r0 ; result reg
18ea : 9c9c     |     skip.gt r2, r3
18ec : 2006     |     br multL2_pseudo_ops
18ee : 9484     |     mov r4, r2
18f0 : 94c2     |     mov r2, r3
18f2 : 9503     |     mov r3, r4
     :          | multL2_pseudo_ops:
18f4 : 000c     |     ldi r4, 1
18f6 : 9ca4     |     skip.gt r2, r4
18f8 : 200c     |     br multL3_pseudo_ops
18fa : a614     |     andi r4, r2, 1
18fc : afe4     |     addskpi.nz r4, r4, -1
18fe : 9459     |     add r1, r1, r3
1900 : dc29     |     shr r2, r2, 1
1902 : da2e     |     shl r3, r3, 1
1904 : 3fee     |     br multL2_pseudo_ops
     :          | multL3_pseudo_ops:
1906 : a60c     |     andi r4, r1, 1
1908 : afe4     |     addskpi.nz r4, r4, -1
190a : 9459     |     add r1, r1, r3
190c : c205     |     br.r bp;  Initial process execs /init.
     :          | _initcodestart:
190e : 0f41     |     la16 r1, L2_initcode
1910 : bc30     |     
1912 : be01     |     push r1
1914 : 0f01     |     la16 r1, L1_initcode
1916 : bc30     |     
1918 : be01     |     push r1
191a : be00     |     push r0    ; where caller pc would be
191c : 0039     |     ldi r1, 7 ; syscall 7 = exec
191e : be01     |     push r1
1920 : c400     |     syscall
     :          | L2_console:
1922 : 3031     |     defb 48
1924 : 3233     |     defb 50
1926 : 3435     |     defb 52
1928 : 3637     |     defb 54
192a : 3839     |     defb 56
192c : 6162     |     defb 97
192e : 6364     |     defb 99
1930 : 6566     |     defb 101
1932 : 0028     |     defb 0
1934 : 6e75     |     defb 110
1936 : 6c6c     |     defb 108
1938 : 2900     |     defb 41
     :          | L2_kalloc0:
193a : 4669     |     defb 70
193c : 6e64     |     defb 110
193e : 6672     |     defb 102
1940 : 6565     |     defb 101
1942 : 7067     |     defb 112
1944 : 3a20     |     defb 58
1946 : 4e4f     |     defb 78
1948 : 2046     |     defb 32
194a : 5245     |     defb 82
194c : 4520     |     defb 69
194e : 5041     |     defb 80
1950 : 4745     |     defb 71
1952 : 2046     |     defb 32
1954 : 4f55     |     defb 79
1956 : 4e44     |     defb 78
1958 : 210a     |     defb 33
195a : 0000     |     defb 0
     :          | _kptb:
195c : 0000     |     defw 0x0
     :          | L1_proc8:
195e : 666f     |     defb 102
1960 : 756e     |     defb 117
1962 : 6420     |     defb 100
1964 : 6672     |     defb 102
1966 : 6565     |     defb 101
1968 : 2073     |     defb 32
196a : 6c6f     |     defb 108
196c : 7420     |     defb 116
196e : 6174     |     defb 97
1970 : 3a20     |     defb 58
1972 : 2564     |     defb 37
1974 : 0a00     |     defb 10
     :          | L1_proc7:
1976 : 616c     |     defb 97
1978 : 6c6f     |     defb 108
197a : 6370     |     defb 99
197c : 726f     |     defb 114
197e : 633a     |     defb 99
1980 : 206e     |     defb 32
1982 : 6f20     |     defb 111
1984 : 6672     |     defb 102
1986 : 6565     |     defb 101
1988 : 2073     |     defb 32
198a : 6c6f     |     defb 108
198c : 7420     |     defb 116
198e : 696e     |     defb 105
1990 : 2070     |     defb 32
1992 : 7461     |     defb 116
1994 : 626c     |     defb 98
1996 : 6521     |     defb 101
1998 : 0a00     |     defb 10
     :          | L7_proc:
199a : 7069     |     defb 112
199c : 6e69     |     defb 110
199e : 743a     |     defb 116
19a0 : 2070     |     defb 32
19a2 : 7461     |     defb 116
19a4 : 626c     |     defb 98
19a6 : 6520     |     defb 101
19a8 : 696e     |     defb 105
19aa : 6974     |     defb 105
19ac : 6961     |     defb 105
19ae : 6c69     |     defb 108
19b0 : 7365     |     defb 115
19b2 : 642e     |     defb 100
19b4 : 0a00     |     defb 10
     :          | L2_trap:
19b6 : 5472     |     defb 84
19b8 : 6170     |     defb 97
19ba : 3a20     |     defb 58
19bc : 2564     |     defb 37
19be : 2c20     |     defb 44
19c0 : 7553     |     defb 117
19c2 : 503a     |     defb 80
19c4 : 2025     |     defb 32
19c6 : 7800     |     defb 120
     :          | L2_kmain:
19c8 : 444d     |     defb 68
19ca : 4520     |     defb 69
19cc : 4f53     |     defb 79
19ce : 2076     |     defb 32
19d0 : 2564     |     defb 37
19d2 : 2073     |     defb 32
19d4 : 7461     |     defb 116
19d6 : 7274     |     defb 114
19d8 : 696e     |     defb 105
19da : 672e     |     defb 103
19dc : 2e2e     |     defb 46
19de : 0a00     |     defb 10
     :          | L1_initcode:
19e0 : 2f69     |     defstr "/init\0"
19e2 : 6e69     |     
19e4 : 745c     |     
19e6 : 3000     |     
     :          | L2_initcode:
19e8 : 19e0     |     defw L1_initcode
19ea : 0000     |     defw 0
     :          | _pframe:
19ec : 0000     |     defs 32
19ee : 0000     |     
19f0 : 0000     |     
19f2 : 0000     |     
19f4 : 0000     |     
19f6 : 0000     |     
19f8 : 0000     |     
19fa : 0000     |     
19fc : 0000     |     
19fe : 0000     |     
1a00 : 0000     |     
1a02 : 0000     |     
1a04 : 0000     |     
1a06 : 0000     |     
1a08 : 0000     |     
1a0a : 0000     |     
     :          | _nextpid:
1a0c : 0000     |     defs 2
     :          | _stable:
1a0e : 0000     |     defs 2
     :          | _ptable:
1a10 : 0000     |     defs 416
1a12 : 0000     |     
1a14 : 0000     |     
1a16 : 0000     |     
1a18 : 0000     |     
1a1a : 0000     |     
1a1c : 0000     |     
1a1e : 0000     |     
1a20 : 0000     |     
1a22 : 0000     |     
1a24 : 0000     |     
1a26 : 0000     |     
1a28 : 0000     |     
1a2a : 0000     |     
1a2c : 0000     |     
1a2e : 0000     |     
1a30 : 0000     |     
1a32 : 0000     |     
1a34 : 0000     |     
1a36 : 0000     |     
1a38 : 0000     |     
1a3a : 0000     |     
1a3c : 0000     |     
1a3e : 0000     |     
1a40 : 0000     |     
1a42 : 0000     |     
1a44 : 0000     |     
1a46 : 0000     |     
1a48 : 0000     |     
1a4a : 0000     |     
1a4c : 0000     |     
1a4e : 0000     |     
1a50 : 0000     |     
1a52 : 0000     |     
1a54 : 0000     |     
1a56 : 0000     |     
1a58 : 0000     |     
1a5a : 0000     |     
1a5c : 0000     |     
1a5e : 0000     |     
1a60 : 0000     |     
1a62 : 0000     |     
1a64 : 0000     |     
1a66 : 0000     |     
1a68 : 0000     |     
1a6a : 0000     |     
1a6c : 0000     |     
1a6e : 0000     |     
1a70 : 0000     |     
1a72 : 0000     |     
1a74 : 0000     |     
1a76 : 0000     |     
1a78 : 0000     |     
1a7a : 0000     |     
1a7c : 0000     |     
1a7e : 0000     |     
1a80 : 0000     |     
1a82 : 0000     |     
1a84 : 0000     |     
1a86 : 0000     |     
1a88 : 0000     |     
1a8a : 0000     |     
1a8c : 0000     |     
1a8e : 0000     |     
1a90 : 0000     |     
1a92 : 0000     |     
1a94 : 0000     |     
1a96 : 0000     |     
1a98 : 0000     |     
1a9a : 0000     |     
1a9c : 0000     |     
1a9e : 0000     |     
1aa0 : 0000     |     
1aa2 : 0000     |     
1aa4 : 0000     |     
1aa6 : 0000     |     
1aa8 : 0000     |     
1aaa : 0000     |     
1aac : 0000     |     
1aae : 0000     |     
1ab0 : 0000     |     
1ab2 : 0000     |     
1ab4 : 0000     |     
1ab6 : 0000     |     
1ab8 : 0000     |     
1aba : 0000     |     
1abc : 0000     |     
1abe : 0000     |     
1ac0 : 0000     |     
1ac2 : 0000     |     
1ac4 : 0000     |     
1ac6 : 0000     |     
1ac8 : 0000     |     
1aca : 0000     |     
1acc : 0000     |     
1ace : 0000     |     
1ad0 : 0000     |     
1ad2 : 0000     |     
1ad4 : 0000     |     
1ad6 : 0000     |     
1ad8 : 0000     |     
1ada : 0000     |     
1adc : 0000     |     
1ade : 0000     |     
1ae0 : 0000     |     
1ae2 : 0000     |     
1ae4 : 0000     |     
1ae6 : 0000     |     
1ae8 : 0000     |     
1aea : 0000     |     
1aec : 0000     |     
1aee : 0000     |     
1af0 : 0000     |     
1af2 : 0000     |     
1af4 : 0000     |     
1af6 : 0000     |     
1af8 : 0000     |     
1afa : 0000     |     
1afc : 0000     |     
1afe : 0000     |     
1b00 : 0000     |     
1b02 : 0000     |     
1b04 : 0000     |     
1b06 : 0000     |     
1b08 : 0000     |     
1b0a : 0000     |     
1b0c : 0000     |     
1b0e : 0000     |     
1b10 : 0000     |     
1b12 : 0000     |     
1b14 : 0000     |     
1b16 : 0000     |     
1b18 : 0000     |     
1b1a : 0000     |     
1b1c : 0000     |     
1b1e : 0000     |     
1b20 : 0000     |     
1b22 : 0000     |     
1b24 : 0000     |     
1b26 : 0000     |     
1b28 : 0000     |     
1b2a : 0000     |     
1b2c : 0000     |     
1b2e : 0000     |     
1b30 : 0000     |     
1b32 : 0000     |     
1b34 : 0000     |     
1b36 : 0000     |     
1b38 : 0000     |     
1b3a : 0000     |     
1b3c : 0000     |     
1b3e : 0000     |     
1b40 : 0000     |     
1b42 : 0000     |     
1b44 : 0000     |     
1b46 : 0000     |     
1b48 : 0000     |     
1b4a : 0000     |     
1b4c : 0000     |     
1b4e : 0000     |     
1b50 : 0000     |     
1b52 : 0000     |     
1b54 : 0000     |     
1b56 : 0000     |     
1b58 : 0000     |     
1b5a : 0000     |     
1b5c : 0000     |     
1b5e : 0000     |     
1b60 : 0000     |     
1b62 : 0000     |     
1b64 : 0000     |     
1b66 : 0000     |     
1b68 : 0000     |     
1b6a : 0000     |     
1b6c : 0000     |     
1b6e : 0000     |     
1b70 : 0000     |     
1b72 : 0000     |     
1b74 : 0000     |     
1b76 : 0000     |     
1b78 : 0000     |     
1b7a : 0000     |     
1b7c : 0000     |     
1b7e : 0000     |     
1b80 : 0000     |     
1b82 : 0000     |     
1b84 : 0000     |     
1b86 : 0000     |     
1b88 : 0000     |     
1b8a : 0000     |     
1b8c : 0000     |     
1b8e : 0000     |     
1b90 : 0000     |     
1b92 : 0000     |     
1b94 : 0000     |     
1b96 : 0000     |     
1b98 : 0000     |     
1b9a : 0000     |     
1b9c : 0000     |     
1b9e : 0000     |     
1ba0 : 0000     |     
1ba2 : 0000     |     
1ba4 : 0000     |     
1ba6 : 0000     |     
1ba8 : 0000     |     
1baa : 0000     |     
1bac : 0000     |     
1bae : 0000     |     
